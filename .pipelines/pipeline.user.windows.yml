##This is a build definition yaml for CDPx buil pipelines.
environment:
  host:
    os: 'windows'                                                       # used to verify at runtime that correct host pool is being used
    flavor: 'server'                                                    # not used and will be removed in future
    version: '2016'                                                     # not used and will be removed in future
  runtime:
    provider: 'appcontainer'                                            # Currently only appcontainer is supported
                                                                        # future will bring oscontainer and virtualmachine
    image: 'cdpxwin1809.azurecr.io/global/vse2019:latest' # This is the image that your pipeline will run in.
                                                                        # For (appcontainer), Docker Hub public Microsoft repository images
                                                                        # can be used.
                                                                        # Example microsoft/dotnet:1.1.1-sdk-nanoserver.
                                                                        # Or the CDP team vended and custom images can be used.
                                                                        # These are cdpxwin.azurecr.io/user/<user-image-name> or
                                                                        # cdpxwin.azurecr.io/legacy/samples/wsmobile (for now).
    source_mode: 'link'                                                 # 'copy' or 'link'. There is a known bug for npm and ruby on some of
                                                                        # our images that linked folder in container may cause errors on
                                                                        # these languages, for that case, use 'copy' here and pipeline will
                                                                        # full copy source into container from host before each step and full
                                                                        # copy out back to host after each step. It may be very slow if you
                                                                        # have a giant repository.
